<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>An√°lise Lotof√°cil e Quina</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(to right, #7e57c2, #1976d2);
      color: #333;
    }
    h1 {
      color: white;
      text-align: center;
      margin-bottom: 20px;
    }
    .tab-selector {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
    }
    .tab-selector button {
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #fff;
      color: #333;
      font-weight: bold;
      transition: background 0.3s;
    }
    .tab-selector button.active {
      background-color: #333;
      color: #fff;
    }
    .aba-conteudo {
      display: none;
    }
    .aba-conteudo.active {
      display: block;
    }
  </style>
</head>
<body>
  <h1>üîç An√°lise de Jogos - Lotof√°cil & Quina</h1>

  <div class="tab-selector">
    <button class="active" onclick="trocarAba('lotofacil')">üéØ Lotof√°cil</button>
    <button onclick="trocarAba('quina')">üí∞ Quina</button>
  </div>

  <div id="lotofacil" class="aba-conteudo active">
    <!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lotof√°cil - An√°lise Completa</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(to right, #7e57c2, #ab47bc);
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h1 {
      color: white;
      margin-bottom: 10px;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.4);
      text-align: center;
    }

    /* Bot√£o fixo no topo */
    #btnGerarTop {
      background: #ffffff;
      color: #6a1b9a;
      font-weight: bold;
      padding: 12px 24px;
      border: 2px solid #6a1b9a;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s, color 0.3s;
      margin-bottom: 20px;
      position: sticky;
      top: 10px;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    #btnGerarTop:hover {
      background: #6a1b9a;
      color: white;
    }

    /* Controles */
    .controle {
      background: #f3e5f5;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      margin-bottom: 20px;
      max-width: 800px;
      width: 100%;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      align-items: center;
    }
    .controle label {
      font-weight: bold;
      color: #6a1b9a;
      user-select: none;
    }
    .controle input {
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #6a1b9a;
      width: 120px;
      font-size: 1rem;
      text-align: center;
    }
    .controle button {
      background: #6a1b9a;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    .controle button:hover {
      background: #4a148c;
    }

    /* Tabs */
    .tabs {
      background: white;
      border-radius: 12px;
      max-width: 1000px;
      width: 100%;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      margin-bottom: 30px;
    }
    .tab-buttons {
      display: flex;
      border-bottom: 2px solid #ab47bc;
    }
    .tab-buttons button {
      flex: 1;
      background: #ab47bc;
      color: white;
      border: none;
      padding: 14px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
    }
    .tab-buttons button:hover:not(.active) {
      background: #9c27b0;
    }
    .tab-buttons button.active {
      background: white;
      color: #6a1b9a;
      cursor: default;
    }
    .tab-content {
      padding: 20px;
      display: none;
    }
    .tab-content.active {
      display: block;
    }

    .jogos {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 15px;
      justify-content: center;
    }
    .jogo {
      background: #f8f8f8;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      width: 150px;
      text-align: center;
      user-select: none;
    }
    .numeros {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      justify-content: center;
      margin-top: 8px;
    }
    .bola {
      width: 28px;
      height: 28px;
      background: #d1c4e9;
      color: #4a148c;
      font-weight: bold;
      text-align: center;
      line-height: 28px;
      border-radius: 50%;
      user-select: none;
    }

    /* Lista dos jogos gerados */
    #jogosGeradosLista li {
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    /* Informa√ß√µes adicionais nos jogos gerados */
    .info-jogo {
      font-size: 0.9rem;
      color: #6a1b9a;
      margin-top: 4px;
    }

    canvas {
      background: white;
      margin-top: 20px;
      border-radius: 10px;
      max-width: 100%;
      height: auto !important;
    }

    ul {
      padding-left: 20px;
      max-height: 300px;
      overflow-y: auto;
    }

    @media (max-width: 600px) {
      .controle {
        flex-direction: column;
        align-items: stretch;
      }
      .tab-buttons {
        flex-direction: column;
      }
      #btnGerarTop {
        position: static;
        margin-bottom: 15px;
      }
    }
  </style>
</head>
<body>

  <h1>üéØ Lotof√°cil - An√°lise Completa</h1>

  <!-- Bot√£o no topo fora das abas -->
  <button id="btnGerarTop" onclick="gerarJogosComBaseNos20()">üé≤ Gerar 5 Jogos com base nos 20 mais sorteados</button>

  <!-- Controle de intervalo -->
  <div class="controle">
    <label for="inicio">Concurso de:</label>
    <input type="number" id="inicio" placeholder="Ex: 3100" min="1" />
    <label for="fim">at√©:</label>
    <input type="number" id="fim" placeholder="Ex: 3110" min="1" />
    <button onclick="carregarIntervalo()">Buscar</button>
  </div>

  <!-- Abas -->
  <div class="tabs">
    <div class="tab-buttons">
      <button class="active" onclick="abrirAba('frequencia')">üìä Frequ√™ncia</button>
      <button onclick="abrirAba('maisSorteados')">‚≠ê Mais Sorteados</button>
      <button onclick="abrirAba('jogosGerados')">üé≤ Jogos Gerados</button>
    </div>

    <div id="frequencia" class="tab-content active">
      <div id="jogosContainer" class="jogos"></div>
      <canvas id="graficoFrequencia" width="800" height="400"></canvas>
    </div>

    <div id="maisSorteados" class="tab-content">
      <h2>Top 15 mais sorteados</h2>
      <ul id="listaTop15"></ul>
      <h2>Top 20 mais sorteados</h2>
      <ul id="listaTop20"></ul>
    </div>

    <div id="jogosGerados" class="tab-content">
      <h2>Jogos Gerados</h2>
      <ul id="jogosGeradosLista"></ul>
    </div>
  </div>

  <script>
    const API_URL = 'https://loteriascaixa-api.herokuapp.com/api/lotofacil/';
    let concursos = [];
    let top20 = [];
    let jogosGerados = [];

    function abrirAba(id) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('.tab-buttons button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.tab-buttons button[onclick="abrirAba('${id}')"]`).classList.add('active');
    }

    async function buscarConcurso(n) {
      const cache = JSON.parse(localStorage.getItem('concursos') || '{}');
      if (cache[n]) return cache[n];
      try {
        const res = await fetch(API_URL + n);
        if (!res.ok) return null;
        const data = await res.json();
        cache[n] = data;
        localStorage.setItem('concursos', JSON.stringify(cache));
        return data;
      } catch (error) {
        return null;
      }
    }

    async function carregarIntervalo() {
      const inicio = +document.getElementById('inicio').value;
      const fim = +document.getElementById('fim').value;
      if (!inicio || !fim || inicio > fim) {
        alert("Intervalo inv√°lido.");
        return;
      }

      concursos = [];
      for (let i = inicio; i <= fim; i++) {
        const c = await buscarConcurso(i);
        if (c && c.dezenas) concursos.push(c);
      }
      if (concursos.length === 0) {
        alert("Nenhum concurso encontrado no intervalo informado.");
        return;
      }
      mostrarJogos(concursos);
      gerarGrafico(concursos);
      calcularMaisSorteados(concursos);
      alert(`Dados carregados de ${concursos.length} concursos.`);
    }

    function mostrarJogos(lista) {
      const container = document.getElementById('jogosContainer');
      container.innerHTML = '';
      lista.forEach(jogo => {
        const div = document.createElement('div');
        div.className = 'jogo';
        div.innerHTML = `
          <strong>Concurso ${jogo.concurso}</strong>
          <div class="numeros">
            ${jogo.dezenas.map(n => `<div class="bola">${n}</div>`).join('')}
          </div>`;
        container.appendChild(div);
      });
    }

    function gerarGrafico(lista) {
      const freq = Array(26).fill(0);
      lista.forEach(j => j.dezenas.forEach(n => freq[+n]++));

      const labels = Array.from({ length: 25 }, (_, i) => (i + 1).toString().padStart(2, '0'));
      const dados = labels.map(n => freq[+n]);

      const ctx = document.getElementById('graficoFrequencia').getContext('2d');
      if (window.grafico) window.grafico.destroy();
      window.grafico = new Chart(ctx, {
        type: 'bar',
        data: {
          labels,
          datasets: [{ label: 'Frequ√™ncia dos N√∫meros', data: dados, backgroundColor: '#6a1b9a' }]
        },
        options: {
          responsive: true,
          scales: { y: { beginAtZero: true } },
          plugins: {
            legend: { display: true },
            tooltip: { enabled: true }
          }
        }
      });
    }

    function calcularMaisSorteados(lista) {
      const freq = Array(26).fill(0);
      lista.forEach(j => j.dezenas.forEach(n => freq[+n]++));

      const ranking = [];
      for (let i = 1; i <= 25; i++) {
        ranking.push({ numero: i.toString().padStart(2, '0'), vezes: freq[i] });
      }
      ranking.sort((a, b) => b.vezes - a.vezes);

      const top15 = ranking.slice(0, 15);
      top20 = ranking.slice(0, 20);

      document.getElementById('listaTop15').innerHTML = top15.map(x => `<li><strong>${x.numero}</strong> ‚Äì ${x.vezes} vezes</li>`).join('');
      document.getElementById('listaTop20').innerHTML = top20.map(x => `<li><strong>${x.numero}</strong> ‚Äì ${x.vezes} vezes</li>`).join('');
    }

    function gerarJogosComBaseNos20() {
      if (top20.length === 0) {
        alert('Carregue um intervalo de concursos primeiro para obter os n√∫meros mais sorteados.');
        abrirAba('maisSorteados');
        return;
      }

      jogosGerados = [];
      let tentativas = 0;

      while (jogosGerados.length < 5 && tentativas < 100000) {
        tentativas++;
        const numeros = [...top20.map(x => x.numero)];
        const jogo = [];
        while (jogo.length < 15) {
          const idx = Math.floor(Math.random() * numeros.length);
          jogo.push(numeros.splice(idx, 1)[0]);
        }

        const soma = jogo.reduce((a, b) => a + Number(b), 0);
        const pares = jogo.filter(n => Number(n) % 2 === 0).length;

        if (soma >= 180 && soma <= 220 && pares >= 6 && pares <= 9) {
          jogo.sort((a, b) => +a - +b);
          // Verifica se o jogo j√° existe
          if (!jogosGerados.some(j => j.join(',') === jogo.join(','))) {
            jogosGerados.push(jogo);
          }
        }
      }

      if (jogosGerados.length === 0) {
        alert('N√£o foi poss√≠vel gerar jogos que atendam aos crit√©rios. Tente novamente.');
        return;
      }

      // Exibir lista com detalhes
      const lista = jogosGerados.map((jogo, i) => {
        const soma = jogo.reduce((a,b) => a + Number(b), 0);
        const pares = jogo.filter(n => Number(n) % 2 === 0).length;
        const impares = 15 - pares;
        return `
          <li>
            <strong>Jogo ${i + 1}:</strong> ${jogo.join(', ')}
            <div class="info-jogo">Soma: <strong>${soma}</strong> | Pares: <strong>${pares}</strong> | √çmpares: <strong>${impares}</strong></div>
          </li>`;
      }).join('');

      document.getElementById('jogosGeradosLista').innerHTML = lista;
      abrirAba('jogosGerados');
    }
  </script>
</body>
</html>

  </div>

  <div id="quina" class="aba-conteudo">
    <!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quina - An√°lise Completa com Filtros, Exporta√ß√£o e Simula√ß√£o</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(to right, #1e88e5, #1976d2);
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h1 {
      color: white;
      margin-bottom: 10px;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.4);
      text-align: center;
    }
    #btnGerarTop {
      background: #ffffff;
      color: #1565c0;
      font-weight: bold;
      padding: 12px 24px;
      border: 2px solid #1565c0;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s, color 0.3s;
      margin-bottom: 20px;
      position: sticky;
      top: 10px;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    #btnGerarTop:hover {
      background: #1565c0;
      color: white;
    }
    .controle {
      background: #bbdefb;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      margin-bottom: 20px;
      max-width: 800px;
      width: 100%;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      align-items: center;
    }
    .controle label {
      font-weight: bold;
      color: #1565c0;
      user-select: none;
    }
    .controle input[type="number"] {
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #1565c0;
      width: 120px;
      font-size: 1rem;
      text-align: center;
    }
    .controle button {
      background: #1565c0;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    .controle button:hover {
      background: #0d47a1;
    }
    .tabs {
      background: white;
      border-radius: 12px;
      max-width: 1000px;
      width: 100%;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      margin-bottom: 30px;
    }
    .tab-buttons {
      display: flex;
      border-bottom: 2px solid #1976d2;
      flex-wrap: wrap;
    }
    .tab-buttons button {
      flex: 1;
      background: #1976d2;
      color: white;
      border: none;
      padding: 14px;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
      min-width: 120px;
    }
    .tab-buttons button:hover:not(.active) {
      background: #1565c0;
    }
    .tab-buttons button.active {
      background: white;
      color: #1565c0;
      cursor: default;
    }
    .tab-content {
      padding: 20px;
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    .jogos {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 15px;
      justify-content: center;
    }
    .jogo {
      background: #f8f8f8;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      width: 150px;
      text-align: center;
      user-select: none;
    }
    .numeros {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      justify-content: center;
      margin-top: 8px;
    }
    .bola {
      width: 28px;
      height: 28px;
      background: #bbdefb;
      color: #0d47a1;
      font-weight: bold;
      text-align: center;
      line-height: 28px;
      border-radius: 50%;
      user-select: none;
    }
    #jogosGeradosLista li, #simulacaoResultados li {
      margin-bottom: 10px;
      font-size: 1.1rem;
    }
    .info-jogo {
      font-size: 0.9rem;
      color: #1565c0;
      margin-top: 4px;
    }
    .filtros {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-bottom: 15px;
    }
    .filtros label {
      flex: 1 1 130px;
      color: #1565c0;
      font-weight: 600;
      user-select: none;
    }
    .filtros input {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #1565c0;
      font-size: 1rem;
      text-align: center;
    }
    #btnExportar, #btnSimular {
      background: #0d47a1;
      margin-top: 10px;
      width: 200px;
      align-self: center;
    }
    #btnExportar:hover, #btnSimular:hover {
      background: #08306b;
    }
    canvas {
      background: white;
      margin-top: 20px;
      border-radius: 10px;
      max-width: 100%;
      height: auto !important;
    }
    ul {
      padding-left: 20px;
      max-height: 300px;
      overflow-y: auto;
    }
    .input-simulacao {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: center;
    }
    .input-simulacao input {
      width: 45px;
      padding: 8px;
      font-size: 1.1rem;
      text-align: center;
      border-radius: 6px;
      border: 1px solid #1565c0;
      user-select: none;
    }
    @media (max-width: 600px) {
      .controle {
        flex-direction: column;
        align-items: stretch;
      }
      .tab-buttons {
        flex-direction: column;
      }
      #btnGerarTop {
        position: static;
        margin-bottom: 15px;
      }
      .filtros label {
        flex: 1 1 100%;
      }
    }
  </style>
</head>
<body>

  <h1>üéØ Quina - An√°lise Completa</h1>

  <button id="btnGerarTop" onclick="gerarJogosComBaseNos20()">üé≤ Gerar 5 Jogos com base nos 20 mais sorteados</button>

  <div class="controle">
    <label for="inicio">Concurso de:</label>
    <input type="number" id="inicio" placeholder="Ex: 6000" min="1" />
    <label for="fim">at√©:</label>
    <input type="number" id="fim" placeholder="Ex: 6010" min="1" />
    <button onclick="carregarIntervalo()">Buscar</button>
  </div>

  <div class="tabs">
    <div class="tab-buttons">
      <button class="active" onclick="abrirAba('frequencia')">üìä Frequ√™ncia</button>
      <button onclick="abrirAba('maisSorteados')">‚≠ê Mais Sorteados</button>
      <button onclick="abrirAba('jogosGerados')">üé≤ Jogos Gerados</button>
      <button onclick="abrirAba('simulacao')">üéØ Simula√ß√£o de Acertos</button>
    </div>

    <div id="frequencia" class="tab-content active">
      <div id="jogosContainer" class="jogos"></div>
      <canvas id="graficoFrequencia" width="800" height="400"></canvas>
    </div>

    <div id="maisSorteados" class="tab-content">
      <h2>Top 15 mais sorteados</h2>
      <ul id="listaTop15"></ul>
      <h2>Top 20 mais sorteados</h2>
      <ul id="listaTop20"></ul>
    </div>

    <div id="jogosGerados" class="tab-content">
      <h2>Filtros para gera√ß√£o dos jogos</h2>
      <div class="filtros">
        <label>Soma M√≠nima: <input type="number" id="filtroSomaMin" value="100" min="5" max="400"></label>
        <label>Soma M√°xima: <input type="number" id="filtroSomaMax" value="200" min="5" max="400"></label>
        <label>Pares M√≠nimos: <input type="number" id="filtroParesMin" value="1" min="0" max="5"></label>
        <label>Pares M√°ximos: <input type="number" id="filtroParesMax" value="3" min="0" max="5"></label>
        <label>√çmpares M√≠nimos: <input type="number" id="filtroImparesMin" value="2" min="0" max="5"></label>
        <label>√çmpares M√°ximos: <input type="number" id="filtroImparesMax" value="4" min="0" max="5"></label>
      </div>

      <button id="btnGerarComFiltros" onclick="gerarJogosComFiltros()">üé≤ Gerar Jogos com Filtros</button>
      <button id="btnExportar" onclick="exportarJogos()">üíæ Exportar Jogos Gerados</button>

      <h2>Jogos Gerados</h2>
      <ul id="jogosGeradosLista"></ul>
    </div>

    <div id="simulacao" class="tab-content">
      <h2>Simulador de Acertos</h2>
      <p>Digite os 5 n√∫meros sorteados (resultado oficial):</p>
      <div class="input-simulacao" id="inputsSorteio">
        <input type="number" min="1" max="80" id="sorteio1" />
        <input type="number" min="1" max="80" id="sorteio2" />
        <input type="number" min="1" max="80" id="sorteio3" />
        <input type="number" min="1" max="80" id="sorteio4" />
        <input type="number" min="1" max="80" id="sorteio5" />
      </div>
      <button id="btnSimular" onclick="simularAcertos()">‚ñ∂ Simular Acertos</button>

      <h3>Resultados da Simula√ß√£o</h3>
      <ul id="simulacaoResultados"></ul>
      <canvas id="graficoSimulacao" width="800" height="400"></canvas>
    </div>
  </div>

  <script>
    const API_URL = 'https://loteriascaixa-api.herokuapp.com/api/quina/';

    let concursos = [];
    let top20 = [];
    let jogosGerados = [];

    function abrirAba(id) {
      document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('.tab-buttons button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.tab-buttons button[onclick="abrirAba('${id}')"]`).classList.add('active');
    }

    async function buscarConcurso(n) {
      const cache = JSON.parse(localStorage.getItem('concursosQuina') || '{}');
      if (cache[n]) return cache[n];
      try {
        const res = await fetch(API_URL + n);
        if (!res.ok) return null;
        const data = await res.json();
        cache[n] = data;
        localStorage.setItem('concursosQuina', JSON.stringify(cache));
        return data;
      } catch {
        return null;
      }
    }

    async function carregarIntervalo() {
      const inicio = +document.getElementById('inicio').value;
      const fim = +document.getElementById('fim').value;
      if (!inicio || !fim || inicio > fim) {
        alert("Intervalo inv√°lido.");
        return;
      }
      concursos = [];
      for (let i = inicio; i <= fim; i++) {
        const c = await buscarConcurso(i);
        if (c && c.dezenas) concursos.push(c);
      }
      if (concursos.length === 0) {
        alert("Nenhum concurso encontrado no intervalo informado.");
        return;
      }
      mostrarJogos(concursos);
      gerarGrafico(concursos);
      calcularMaisSorteados(concursos);
      alert(`Dados carregados de ${concursos.length} concursos.`);
    }

    function mostrarJogos(lista) {
      const container = document.getElementById('jogosContainer');
      container.innerHTML = '';
      lista.forEach(jogo => {
        const div = document.createElement('div');
        div.className = 'jogo';
        div.innerHTML = `
          <strong>Concurso ${jogo.concurso}</strong>
          <div class="numeros">
            ${jogo.dezenas.map(n => `<div class="bola">${n}</div>`).join('')}
          </div>`;
        container.appendChild(div);
      });
    }

    function gerarGrafico(lista) {
      const freq = Array(81).fill(0);
      lista.forEach(j => j.dezenas.forEach(n => freq[+n]++));

      const labels = Array.from({ length: 80 }, (_, i) => (i + 1).toString().padStart(2, '0'));
      const dados = labels.map(n => freq[+n]);

      const ctx = document.getElementById('graficoFrequencia').getContext('2d');
      if (window.grafico) window.grafico.destroy();
      window.grafico = new Chart(ctx, {
        type: 'bar',
        data: {
          labels,
          datasets: [{ label: 'Frequ√™ncia dos N√∫meros', data: dados, backgroundColor: '#1565c0' }]
        },
        options: {
          responsive: true,
          scales: { y: { beginAtZero: true } },
          plugins: { legend: { display: true }, tooltip: { enabled: true } }
        }
      });
    }

    function calcularMaisSorteados(lista) {
      const freq = Array(81).fill(0);
      lista.forEach(j => j.dezenas.forEach(n => freq[+n]++));

      const ranking = [];
      for (let i = 1; i <= 80; i++) {
        ranking.push({ numero: i.toString().padStart(2, '0'), vezes: freq[i] });
      }
      ranking.sort((a, b) => b.vezes - a.vezes);

      const top15 = ranking.slice(0, 15);
      top20 = ranking.slice(0, 20);

      document.getElementById('listaTop15').innerHTML = top15.map(x => `<li><strong>${x.numero}</strong> ‚Äì ${x.vezes} vezes</li>`).join('');
      document.getElementById('listaTop20').innerHTML = top20.map(x => `<li><strong>${x.numero}</strong> ‚Äì ${x.vezes} vezes</li>`).join('');
    }

    function gerarJogosComBaseNos20() {
      if (top20.length === 0) {
        alert('Carregue um intervalo de concursos primeiro para obter os n√∫meros mais sorteados.');
        abrirAba('maisSorteados');
        return;
      }
      // Usa filtros padr√£o
      const somaMin = 100;
      const somaMax = 200;
      const paresMin = 1;
      const paresMax = 3;
      const imparesMin = 2;
      const imparesMax = 4;
      gerarJogosComFiltros(somaMin, somaMax, paresMin, paresMax, imparesMin, imparesMax);
    }

    function gerarJogosComFiltros(
      somaMinParam, somaMaxParam, paresMinParam, paresMaxParam, imparesMinParam, imparesMaxParam
    ) {
      if (top20.length === 0) {
        alert('Carregue um intervalo de concursos primeiro para obter os n√∫meros mais sorteados.');
        abrirAba('maisSorteados');
        return;
      }
      // Se par√¢metros n√£o passados, pega dos inputs
      let somaMin = somaMinParam ?? +document.getElementById('filtroSomaMin').value;
      let somaMax = somaMaxParam ?? +document.getElementById('filtroSomaMax').value;
      let paresMin = paresMinParam ?? +document.getElementById('filtroParesMin').value;
      let paresMax = paresMaxParam ?? +document.getElementById('filtroParesMax').value;
      let imparesMin = imparesMinParam ?? +document.getElementById('filtroImparesMin').value;
      let imparesMax = imparesMaxParam ?? +document.getElementById('filtroImparesMax').value;

      if (
        somaMin > somaMax ||
        paresMin > paresMax ||
        imparesMin > imparesMax
      ) {
        alert('Filtros inv√°lidos: valores m√≠nimos maiores que m√°ximos.');
        return;
      }

      jogosGerados = [];
      let tentativas = 0;
      while (jogosGerados.length < 5 && tentativas < 100000) {
        tentativas++;
        const numeros = [...top20.map(x => x.numero)];
        const jogo = [];
        while (jogo.length < 5) {
          const idx = Math.floor(Math.random() * numeros.length);
          jogo.push(numeros.splice(idx, 1)[0]);
        }
        const soma = jogo.reduce((a, b) => a + Number(b), 0);
        const pares = jogo.filter(n => Number(n) % 2 === 0).length;
        const impares = 5 - pares;

        if (
          soma >= somaMin && soma <= somaMax &&
          pares >= paresMin && pares <= paresMax &&
          impares >= imparesMin && impares <= imparesMax
        ) {
          jogo.sort((a, b) => +a - +b);
          if (!jogosGerados.some(j => j.join(',') === jogo.join(','))) {
            jogosGerados.push(jogo);
          }
        }
      }

      if (jogosGerados.length === 0) {
        alert('N√£o foi poss√≠vel gerar jogos que atendam aos crit√©rios. Tente ajustar os filtros.');
        return;
      }

      const lista = jogosGerados.map((jogo, i) => {
        const soma = jogo.reduce((a,b) => a + Number(b), 0);
        const pares = jogo.filter(n => Number(n) % 2 === 0).length;
        const impares = 5 - pares;
        return `
          <li>
            <strong>Jogo ${i + 1}:</strong> ${jogo.join(', ')}
            <div class="info-jogo">Soma: <strong>${soma}</strong> | Pares: <strong>${pares}</strong> | √çmpares: <strong>${impares}</strong></div>
          </li>`;
      }).join('');

      document.getElementById('jogosGeradosLista').innerHTML = lista;
      abrirAba('jogosGerados');
    }

    function exportarJogos() {
      if (jogosGerados.length === 0) {
        alert('Nenhum jogo gerado para exportar.');
        return;
      }
      let conteudo = 'Jogos Gerados da Quina\n\n';
      jogosGerados.forEach((jogo, i) => {
        conteudo += `Jogo ${i + 1}: ${jogo.join(', ')}\n`;
      });
      const blob = new Blob([conteudo], {type: 'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'jogos_quina.txt';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    function simularAcertos() {
      if (jogosGerados.length === 0) {
        alert('Gere jogos antes de simular acertos.');
        abrirAba('jogosGerados');
        return;
      }
      // Pega os n√∫meros sorteados da simula√ß√£o
      const sorteio = [];
      for(let i = 1; i <= 5; i++) {
        let v = +document.getElementById(`sorteio${i}`).value;
        if (isNaN(v) || v < 1 || v > 80) {
          alert('Digite n√∫meros v√°lidos entre 1 e 80 para o resultado oficial.');
          return;
        }
        if (sorteio.includes(v)) {
          alert('N√∫meros repetidos no resultado oficial.');
          return;
        }
        sorteio.push(v);
      }

      const resultados = jogosGerados.map((jogo, i) => {
        let acertos = jogo.reduce((acc, n) => acc + (sorteio.includes(Number(n)) ? 1 : 0), 0);
        return { jogo, acertos };
      });

      // Exibe resultado em lista
      const ul = document.getElementById('simulacaoResultados');
      ul.innerHTML = resultados.map(({jogo, acertos}, i) =>
        `<li><strong>Jogo ${i+1}:</strong> ${jogo.join(', ')} ‚Äî Acertos: <strong>${acertos}</strong></li>`
      ).join('');

      // Gera gr√°fico dos acertos
      const ctx = document.getElementById('graficoSimulacao').getContext('2d');
      if (window.graficoSimulacao) window.graficoSimulacao.destroy();

      const labels = resultados.map((_, i) => `Jogo ${i+1}`);
      const data = resultados.map(r => r.acertos);

      window.graficoSimulacao = new Chart(ctx, {
        type: 'bar',
        data: {
          labels,
          datasets: [{
            label: 'N√∫mero de Acertos',
            data,
            backgroundColor: data.map(acerto => {
              if (acerto === 5) return '#4caf50';    // Verde: m√°ximo acerto
              if (acerto >= 3) return '#ffb300';    // Amarelo: bom acerto
              return '#ef5350';                     // Vermelho: pouco acerto
            })
          }]
        },
        options: {
          responsive: true,
          scales: { y: { beginAtZero: true, max: 5, stepSize: 1 } },
          plugins: { legend: { display: false }, tooltip: { enabled: true } }
        }
      });

      abrirAba('simulacao');
    }
  </script>

</body>
</html>

  </div>

  <script>
    function trocarAba(aba) {
      document.querySelectorAll('.aba-conteudo').forEach(el => el.classList.remove('active'));
      document.getElementById(aba).classList.add('active');

      document.querySelectorAll('.tab-selector button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.tab-selector button[onclick="trocarAba('${aba}')"]`).classList.add('active');
    }
  </script>
</body>
</html>
